{% extends "base.html" %}
{% block content %}

    <experiment-index
        inline-template
        :common="{placeholders: placeholders}"
        api-url="${agitator_url}"
        language="${lang}"
        placeholder-image-url="/img/placeholder.png"
        get-place="index"
        show-limit="12"
        :sort-experiments-object="[{key:'likes',name:'Suosituimmat ensin',initial:true}, {key:'alphabetical', name:'Aakkosjärjestyksessä', initial:false}, {key:'id', name:'Recent', initial:false}]">
        <div class="wrapper browse">

            <div class="large-12 columns">
                <input @keyup="searchExperiments" v-model="searchTerm" type="text" class="form-control filter" placeholder="Kirjoita hakusana etsiäksesi kokeiluja">
                <!--Type to search experiments-->
            </div>

            <!-- sorting -->
            <div v-if="sortOptionsObject" class="large-12 columns">
                <h3>Sort by:</h3>
                <span v-for="option in sortOptionsObject">
                    <input type="checkbox" :name="option.name" :checked="option.initial" :id="option.name" v-model="option.initial">
                    <label :for="option.name">{{ option.name }}</label>
                </span>
            </div>

            <div class="large-12 columns">
                <a :href="rootUrl + '${lang}/haku/stage/0'">
                    <h3>Haasteet</h3>
                    <!--Challenges-->
                </a>
            </div>
            <div v-for="experiment in sortExperiments(keywordFilter(sliceExperiments(filterByStage(filterById(experiments, showExperimentIds), '0') , 0, showLimit), searchTerm))">

                ${include('experiment_index_parts/experiment_card.html')}

            </div>

            <div class="large-12 columns">
                <a :href="rootUrl + '${lang}/haku/stage/1'">
                    <h3>Ideat</h3>
                    <!--Ideas-->
                </a>
            </div>

            <div v-for="experiment in sortExperiments(keywordFilter(sliceExperiments(filterByStage(filterById(experiments, showExperimentIds), '1') , 0, showLimit), searchTerm))">

                ${include('experiment_index_parts/experiment_card.html')}

            </div>

            <div class="large-12 columns">
                <a :href="rootUrl + '${lang}/haku/stage/2'">
                    <h3>Ehdotukset</h3>
                    <!--Suggestions-->
                </a>
            </div>

            <div v-for="experiment in sortExperiments(keywordFilter(sliceExperiments(filterByStage(filterById(experiments, showExperimentIds), '2') , 0, showLimit), searchTerm))">

                ${include('experiment_index_parts/experiment_card.html')}

            </div>

            <div class="large-12 columns">
                <a :href="rootUrl + '${lang}/haku/stage/3'">
                    <h3>Rahoituskampanjat</h3>
                    <!--Funding-->
                </a>
            </div>

            <div v-for="experiment in sortExperiments(keywordFilter(sliceExperiments(filterByStage(filterById(experiments, showExperimentIds), '3') , 0, showLimit), searchTerm))">

                ${include('experiment_index_parts/experiment_card.html')}

            </div>

            <div class="large-12 columns">
                <a :href="rootUrl + '${lang}/haku/stage/4'">
                    <h3>Kokeilut</h3>
                    <!--Experiments-->
                </a>
            </div>

            <div v-for="experiment in sortExperiments(keywordFilter(sliceExperiments(filterByStage(filterById(experiments, showExperimentIds), '4') , 0, showLimit), searchTerm))">

                ${include('experiment_index_parts/experiment_card.html')}

            </div>

            <div class="large-12 columns">
                <a :href="rootUrl + '${lang}/haku/stage/5'">
                    <h3>Opit</h3>
                    <!--Archive-->
                </a>
            </div>

            <div v-for="experiment in sortExperiments(keywordFilter(sliceExperiments(filterByStage(filterById(experiments, showExperimentIds), '5') , 0, showLimit), searchTerm))">

                ${include('experiment_index_parts/experiment_card.html')}

            </div>

        </div>
    </experiment-index>

{% endblock %}
